# 虚幻AI

​	有趣的值得注意的点：行为树中的AI Move不产生加速度，无法像可控的第三人称模板那样通过检测加速度决定shouldmove

## AIController

​	部署BT和改变BB中变量的值，使用Run Behavior Tree节点部署BT

## 黑板

​	存储AI需要的一些信息，相当于AI的大脑，行为树中的一些Task可能需要黑板中的一些”键“

## AI行为树

​	定义AI的一些行为，要使行为树生效需要在AI Controller中启用行为树。需要给BT指定一个BlackBoard除非你只有一个BB

### 合成节点（Composite）

**合成（Composites）** 节点是流控制的一种形式，决定了与其相连的子分支的执行方式。

| 合成节点                        | 描述                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| **选择器（Selector）**          | 从左到右执行分支，通常用于在子树之间进行选择。当选择器找到能够成功执行的子树时，将停止在子树之间移动。举例而言，如果AI正在有效地追逐玩家，选择器将停留在那个分支中，直到它的执行结束，然后转到选择器的父合成节点，继续决策流。 |
| **序列（Sequence）**            | 从左到右执行分支，通常用于按顺序执行一系列子项。与选择器节点不同，序列节点会持续执行其子项，直到它遇到失败的节点。举例而言，如果我们有一个序列节点移动到玩家，则会检查他们是否在射程内，然后旋转并攻击。如果检查玩家是否在射程内便已失败，则不会执行旋转和攻击动作 |
| **简单平行（Simple Parallel）** | 简单平行节点有两个"连接"。第一个是主任务，它只能分配一个任务节点（意味着没有合成节点）。第二个连接（后台分支）是主任务仍在运行时应该执行的活动。简单平行节点可能会在主任务完成后立即结束，或者等待后台分支的结束，具体依属性而定。 |

### Behavior Tree Task

​	行为树的任务节点是紫色的。

​	类似于一个函数，可以接受参数，参数来自于BlackBoard

​	重要的节点：Event Recieve Execute AI，Finish Execute

### BT Decorator & BT Service

| **装饰器（Decorator）** | 也称为条件语句。这种节点附着于另一个节点，决定着树中的一个分支，甚至单个节点是否能够被执行。 |
| ----------------------- | ------------------------------------------------------------ |
| **服务（Service）**     | 这类节点连接至 **任务（Task）** 节点和 **合成（Composite）** 节点，只要它们的分支正在执行，它们就会以所定义的频率执行。这些节点通常用于检查和更新 **黑板**。它们取代了其他行为树系统中的传统平行（Parallel）节点。 |

#### Decorator

​	节点颜色是蓝色的，类似于一个If判断，但是更类似于以一个函数的形式。

#### Service

​	**服务** 节点中的脚本类似于每个 **任务** 节点中的脚本，但是你最好使用 **Event Receive Activation AI**，而不使用 **Event Receive Execute AI**。因为它们是 **服务** 节点，所以你也不需要 **结束执行（Finish Execute）** 节点。
