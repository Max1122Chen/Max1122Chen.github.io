# 虚幻5材质

材质需要保存才能编译

材质窗口的这几个按钮可以切换材质预览对象，方便观察

![image-20241026195341873](C:\Users\Max1122Chen\AppData\Roaming\Typora\typora-user-images\image-20241026195341873.png)

### 主材质节点的作用

1.基础颜色

影响颜色

ctrl+3拉出一个3维向量



2.金属度（0，1）

控制金属性，1=金属



3.高光度（0，1）

控制反光强度

0=不反光



4.粗糙度（0，1）

1=光滑



5.各向异性（0，1）

控制高光形状

和“切线”配合可以改变高光拉长方向



6.自发光颜色

表面发光，可以照明



7.不透明度（0，1）（默认关闭，在“details”下混合模式改成“不透明”可以开启）

0=全透明



8.不透明蒙版（默认关闭，混合模式改“已遮罩”）

可以在用有透明区域的图片当作材质颜色时，使图片透明区域也正常显示为透明的



9.法线（Normal）

接受法线贴图，根据法线贴图产生凹凸纹理。



10.全局位置偏移

通过材质调整模型在空间中的位置

可以使模型“动”起来



11.次表面颜色（着色模型设置成“次表面”）

形成透光效果，控制透光的颜色

可以在做宝石的材质时用，配合不透明度可以提升效果



12.自定义着色模型控制点

在改着色模型的时候会根据你改的模式变成不同的节点



13.环境光遮挡

控制AO



14.折射

玻璃



15.像素深度偏移

通过在着色器图表中设置一些逻辑来控制像素深度



16.着色模型（开“来自材质表达式”）

自定义着色模型



### 材质的分类——六大类

1.表面材质

赋予表面质感



2.延迟贴花

类似喷漆



3.光照函数

控制灯光动画、照射效果



4.体积材质

控制指数级高度雾、体积云的形状等



5.后期处理

配合后期处理体积使用，要先放后期处理体积



6.用户界面

控制ui

### 纹理

增加细节，增加真实性

##### 纹理尺寸

UE中长宽必须是2的幂数（不一定相等），最大是8192*8192

不是2的幂数会不产生多级渐进纹理（mipmaps，远近时改变纹理精度）

##### 纹理格式

基本支持各种图片文件，psd，tga无损无压缩，常用



支持3D贴图，3D贴图类似切片（很少使用，做特效）



虚拟纹理：根据模型离摄像机的远近决定纹理显示的精度，可以优化。



支持导入纹理

##### 纹理导入

先调整纹理大小，或者配合UV



##### 纹理压缩

默认已导入纹理会被压缩成DXTC或BC格式

B8G8R8A8或其他部分未被压缩



### 材质数据基础

最多四通道数据RGBA

四个通道既可能表示颜色、又可能表示空间坐标等等



#### 材质中的运算

图片被视为数组

图片加法是每个像素点进行相加->线性减淡，减法相反->减去

图片乘法->正片叠底 ，除法->划分



**常量偏差比例**（ConstantBiasScale）：先加后乘（常用）

**线性插值**：图层管理节点，三个输入点，A，B，Alpha。Alpha控制透明度范围为（0，1），超过范围会出错，0完全显示A，1完全显示B。常用clamp节点、Saturate节点（性能更好，但不能自定义范围）控制Alpha输入。Alpha还可以接受Alpha通道的处理，也是0（黑色）显示A，1（白色）显示B。

**数据维度控制**：

mask节点，选择没有分离通道的数据的某条通道。

append节点，把一维数据升维

makefloat节点，也是数据升维，可以升2~4

**色彩控制**：

加法、乘法

加或乘一个三维向量会向某种颜色偏移，加或乘一个一维向量会影响明暗和灰度。

power节点，进行自身的幂运算，由于色彩数值不超过1，所以使用power总会压暗图片

cheapcontrast节点，可以控制对比度



**UV基础与数据应用**（texture coordinate）

U加左键快速创建

调整纹理的位移，纹理的尺寸，纹理的平铺次数，调整纹理的动态变化，只影响纹理坐标，不会影响模型的UV坐标。

在材质“细节”看节点信息。

U控制横向平铺，V控制竖向平铺。



texture coordinate是一个二维数据，U用红色表示，V用绿色表示，节点展示红绿叠加的状况。

模型上的UV坐标范围为（0，1），假如乘2，就会在模型的（0，1）内显示（0，2）的内容。乘法运算改变平铺次数，加法运算产生偏移。



## 快速创建材质实例

​	材质实例相较普通材质，材质实例更“小”，更“快”，而且材质实例能够基于一个材质实现类似派生的逻辑。



​	材质实例的创建需要基于一个普通材质，所以要先创建一个普通材质，此后我们不妨称其为**主材质**。

### 使用材质参数

​	在主材质中，可以拖入一些纹理贴图，连接到对应的材质节点，右键可以选择将其转化成**“参数”**，这样就可以将其暴露在材质实例中作为可以调节的参数。

​	但是只有纹理贴图是不够的，只使用纹理贴图的话，我们就只能获得纯粹的纹理贴图的性质，但是我们可能有更多的需求，例如我们对材质基础色可能还想调整它的亮度、对比度、饱和度、颜色等等，所以我们可以引入更多的参数节点，并且将其与基础的纹理贴图结合起来进行一些计算。

​	我们使用的参数节点可以是一维的浮点参数、三维向量（在材质中通常用于颜色），我们用到的计算有乘法、幂运算等等。

​	对于不同的材质节点可能使用不同的计算，例如对法线贴图节点，我们使用一个FlattenNormal的节点，用于“压平”它。

​	

















