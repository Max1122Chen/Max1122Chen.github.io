# 网络游戏架构基础

## Challenge

- 一致性 Consistency
- 网络传输可靠性 Reliability
- 安全性 Security
- 游戏类型、平台、设备多样性 Diversities
- 复杂性 Complexities
  - 高并发
  - 高性能



## 网络协议基础

经典七层模型：

![image-20251027115449886](assets/image-20251027115449886.png)

![image-20251027115640934](assets/image-20251027115640934.png)

### Socket

![image-20251027115717688](assets/image-20251027115717688.png)

### TCP

![image-20251027115835082](assets/image-20251027115835082.png)

可靠连接，可靠传输，流量控制



TCP核心机制：

![image-20251027120015086](assets/image-20251027120015086.png)

接收方成功接收后，向发送方发送ACK确认接收，允许发送方发接下来的东西

![image-20251027120123854](assets/image-20251027120123854.png)

### UDP

![image-20251027120306153](assets/image-20251027120306153.png)

![image-20251027120328563](assets/image-20251027120328563.png)



实际游戏中不同的需求可能用不同的协议实现

![image-20251027120531253](assets/image-20251027120531253.png)



### 改造原生协议

![image-20251027120702462](assets/image-20251027120702462.png)

![image-20251027120742717](assets/image-20251027120742717.png)

![image-20251027120849207](assets/image-20251027120849207.png)

 