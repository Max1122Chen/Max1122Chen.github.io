# Geometry

![image-20250926105818766](assets/image-20250926105818766.png)

![image-20250926105902559](assets/image-20250926105902559.png)

![image-20250926105927327](assets/image-20250926105927327.png)

![image-20250926110033292](assets/image-20250926110033292.png)

![image-20250926110221169](assets/image-20250926110221169.png)

![image-20250926110349753](assets/image-20250926110349753.png)

![image-20250926110437158](assets/image-20250926110437158.png)

![image-20250926110537814](assets/image-20250926110537814.png)



## 几何的表示

![image-20250926110559945](assets/image-20250926110559945.png)

### “隐式”几何

“隐式”几何——不会具体给出顶点的坐标，而会告知顶点坐标满足的“关系”，例如一个函数或者一个方程

![image-20250926110841761](assets/image-20250926110841761.png)

![image-20250926110918524](assets/image-20250926110918524.png)

![image-20250926111041458](assets/image-20250926111041458.png)

### 

![image-20250926111118129](assets/image-20250926111118129.png)

![image-20250926111236885](assets/image-20250926111236885.png)

通过u，v映射，可以通过参数计算一个原本隐式的图形显式的坐标

![image-20250926111334848](assets/image-20250926111334848.png)

![image-20250926111453007](assets/image-20250926111453007.png)







![image-20250926111543504](assets/image-20250926111543504.png)

![image-20250926111756922](assets/image-20250926111756922.png)

![image-20250926112029234](assets/image-20250926112029234.png)

![image-20250926112155008](assets/image-20250926112155008.png)

![image-20250926112816686](assets/image-20250926112816686.png)

![image-20250926112946439](assets/image-20250926112946439.png)



**分形几何**

![image-20250926113314496](assets/image-20250926113314496.png)



### “显式”几何

![image-20250927081410787](assets/image-20250927081410787.png)

### 点云

![image-20250927081626441](assets/image-20250927081626441.png)

###  多边形

![image-20250927081750588](assets/image-20250927081750588.png)

三角形面形成的物体的存储方式：

![image-20250927081840758](assets/image-20250927081840758.png)

v：顶点坐标

vn：法线

vt：纹理坐标

f：face：v/vt/vn，每三个点组织起来

## 曲线

![image-20250927082337891](assets/image-20250927082337891.png)

#### 贝塞尔曲线

![image-20250927082427058](assets/image-20250927082427058.png)

用一系列“控制点”定义曲线

![image-20250927082510689](assets/image-20250927082510689.png)

定义了曲线起始要经过P0，结束要经过P3，起始切线方向沿P0P1，结束切线方向延P2P3

![image-20250927082709245](assets/image-20250927082709245.png)

##### 怎么画贝塞尔曲线？

![image-20250927083216260](assets/image-20250927083216260.png)

假设贝塞尔曲线是从起点走向终点的一条路径，t=0时出发，t=1时到达终点，分别以时间为参数，通过某种计算，取控制点连线上的一点，连起来，再继续取新连线上的点，直到不能再产生新的连线

![image-20250927083731448](assets/image-20250927083731448.png)

![image-20250927083842483](assets/image-20250927083842483.png)

实际上两个控制点之间的点怎么取？，就是通过以时间t为参数做一个线性插值，得到控制点之间的节点

![image-20250927084048692](assets/image-20250927084048692.png)

三控制点贝塞尔曲线最后计算得出的绘制出贝塞尔曲线的动点的坐标表达式

![image-20250927084314277](assets/image-20250927084314277.png)

对于多个控制点产生的贝塞尔曲线，只需按上面的算法继续算，算到最后只有一个点，就得到了产生轨迹的动点。动点的坐标可以经伯恩斯坦多项式表示

![image-20250927085144374](assets/image-20250927085144374.png)

![image-20250927085239579](assets/image-20250927085239579.png)

![image-20250927085629345](assets/image-20250927085629345.png)

贝塞尔曲线在仿射变换下有一个好的性质：控制点经过仿射变换再画一条新的贝塞尔曲线和把形成贝塞尔曲线的所有点分别做仿射变换得到的曲线是一样的

贝塞尔曲线上的点一定在控制点形成的凸包上

**凸包：**

![image-20250927085819084](assets/image-20250927085819084.png)



##### 分段贝塞尔曲线

![image-20250927090126508](assets/image-20250927090126508.png)

每四个控制点产生一条贝塞尔曲线，然后把多段贝塞尔曲线连起来

想让连起来的贝塞尔曲线连续，只需要让既是某条曲线起点，又是另一条曲线的终点的点P，使得它相邻两边的两个控制点共线且到P的距离相等，就可以连续

##### 分段贝塞尔曲线的连续性：

![image-20250927090910899](assets/image-20250927090910899.png)



#### 样条线

![image-20250927091025972](assets/image-20250927091025972.png)

![image-20250927091130061](assets/image-20250927091130061.png)

B-样条线 比贝塞尔曲线更容易控制，贝塞尔曲线动一个点就容易动整条线，B-样条线具有局部性



#### 贝塞尔曲面

![image-20250927092531560](assets/image-20250927092531560.png)

![image-20250927092626930](assets/image-20250927092626930.png)

##### 怎么产生贝塞尔曲面？

![image-20250927092828539](assets/image-20250927092828539.png)

![image-20250927092847952](assets/image-20250927092847952.png)

通过贝塞尔曲线，任取参数t∈（0，1），得到一些点，把这些点作为控制点再产生贝塞尔曲线，只要遍历时间t，就可以产生连续的贝塞尔曲线集，也就形成了曲面

![image-20250927093335516](assets/image-20250927093335516.png)

贝塞尔曲线上的任意一个点，先需要通过已有的贝塞尔曲线找到一个时间对应的新控制点，这需要一个时间u，在新控制点上又要有一个时间v来算出，所以最终就是用两个参数（u，v）来控制它





### 表面细分

![image-20250928171758255](assets/image-20250928171758255.png)

![image-20250928171834018](assets/image-20250928171834018.png)

三角形形状相差太大不利于渲染，所以可能会对其正则化（Regularization）

![image-20250928171915968](assets/image-20250928171915968.png)





#### Loop细分

![image-20250928173143347](assets/image-20250928173143347.png)



把多边形的中点连起来就可以得到新的多边形



Loop细分和“循环”没关系，发明它的人叫Loop

![image-20250928175851948](assets/image-20250928175851948.png)

![image-20250928180119062](assets/image-20250928180119062.png)



如何改变旧有的顶点？

![image-20250928180234549](assets/image-20250928180234549.png)

先产生新的顶点（逻辑很简单），以前的老的顶点要更审慎地改变

Loop细分只能用于三角形面

#### Catmull-Clark Subdivision

Non-quad face 非四边形面

![image-20250928180818796](assets/image-20250928180818796.png)

边上取中点，面内取一个点，把他们连起来，进行一次细分

![image-20250928181637108](assets/image-20250928181637108.png)

紫色点都是奇异点

在非四边形内取点细分出来后，那个被取的点一定是奇异点，因为它要和数量不等于4的点相连

反之，在四边形内部取点细分后，奇异点一定不会再增加

所以Catmull-Clark细分，只有在前几轮会增加奇异点，当所有面都变成四边形后，就不再产生奇异点

计算方法：

![image-20250928213657621](assets/image-20250928213657621.png)

![image-20250928213730288](assets/image-20250928213730288.png)

Catmull-Clark细分可以应用到各种多边形上，不仅仅在三角形上



### 网格简化

![image-20250928220113562](assets/image-20250928220113562.png)

网格简化怎么计算？

边塌陷：

![image-20250928220344697](assets/image-20250928220344697.png)

![image-20250928220426570](assets/image-20250928220426570.png)

把被减少的点做平均会太“塌”了

误差度量：

试图寻找一个点使得它到和它相关的周围的面的距离的平方和最小，即找到一个“二次度量误差”最小的位置

![image-20250928220815512](assets/image-20250928220815512.png)

要简化一个模型，先从二次度量误差最小的开始删

![image-20250928220953158](assets/image-20250928220953158.png)

但是有个问题，删一条边以后，其他边可能会受到影响，就得更新受到影响的边的二次度量误差

这就可以用到“堆”或者说“优先队列”

![image-20250928221335546](assets/image-20250928221335546.png)

